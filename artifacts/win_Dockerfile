# artifacts/win_Dockerfile
FROM ubuntu:20.04

# Instala o Wine e MinGW
RUN dpkg --add-architecture i386 && apt-get update && \
    DEBIAN_FRONTEND=noninteractive apt-get install -y software-properties-common wget && \
    wget -nc https://dl.winehq.org/wine-builds/winehq.key && \
    apt-key add winehq.key && \
    apt-add-repository 'deb https://dl.winehq.org/wine-builds/ubuntu/ focal main' && \
    apt-get update && \
    apt-get install -y --install-recommends winehq-stable wine32 wine64 python3 python3-pip build-essential mingw-w64

# Configura o Wine para 64 bits
RUN WINEARCH=win64 WINEPREFIX=/wineprefix winecfg

# Instala o PyInstaller
RUN pip3 install pyinstaller

# Define o diretório de trabalho
WORKDIR /src

# Copia os arquivos do projeto para o container
COPY . /src

# Instala as dependências do projeto
RUN pip3 install -r requirements.txt
